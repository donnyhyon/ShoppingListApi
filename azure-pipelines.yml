
trigger:
  branches:
    include:
      - main
      - '*'
pool:
  name: FoodAppAgents
stages:
  - stage: "TestBuild"
    jobs:
      # - job: BackendTests
      #   timeoutInMinutes: "10"
      #   steps:
      #     - task: Maven@3
      #       inputs:
      #         mavenPomFile: backend/pom.xml
      #         mavenOptions: -Xmx3072m
      #         javaHomeOption: JDKVersion
      #         jdkArchitectureOption: x64
      #         publishJUnitResults: true
      #         testResultsFiles: "**/surefire-reports/TEST-*.xml"
      #         goals: package
      - job: Frontend
        steps:
          - script: |
              cd ./frontend
              npm ci
              npm test

          - task: PublishTestResults@2
            displayName: 'Publish Unit Test Results'
            condition: succeededOrFailed()
            inputs:
                testResultsFormat: 'JUnit'
                testResultsFiles: '**/junit.xml'
                mergeTestResults: true
                failTaskOnFailedTests: true
                testRunTitle: 'React App Test'